# ===== Настройки ===== #

monitor = DVI-D-1, 1920x1080@75.00Hz, 0x0, 1

$opacity = 0.8
$blur = yes
general:allow_tearing = false

input {
    kb_layout = us, ru
    kb_options = grp:ctrl_shift_toggle, caps:none
    follow_mouse = 1
    sensitivity = 0
    accel_profile = flat
    force_no_accel = true
}

# ===== Автозагрузка ===== #

$waybar = ~/.config/hypr/waybar
$rofi = ~/.config/hypr/rofi

exec-once = waybar -c $waybar/waybar.jsonc -s $waybar/waybar.css
exec-once = wl-clip-persist --clipboard regular
exec-once = wl-paste --type text --watch cliphist store
exec-once = swaync
exec-once = waypaper --restore
exec-once = hyprctl setcursor capitaine-cursors 24
exec-once = /usr/lib/hyprpolkitagent/hyprpolkitagent

env = QT_QPA_PLATFORM,wayland;xcb
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = QT_QPA_PLATFORMTHEME,qt5ct
env = GDK_BACKEND,wayland,x11,*
env = LIBVA_DRIVER_NAME,nvidia
env = __GLX_VENDOR_LIBRARY_NAME,nvidia

# ===== Окна ===== #

general:layout = master

master {
	mfact = 0.6
	new_status = inherit
	new_on_top = true
	orientation = right
}

cursor:no_warps = true

general {
    gaps_in = 3
    gaps_out = 6
    border_size = 1
    col.active_border = rgb(54,56,64)
    col.inactive_border = rgb(54,56,64)
    resize_on_border = true
}

decoration {
    rounding = 10
    rounding_power = 2
    shadow:enabled = false
    active_opacity = $opacity
    inactive_opacity = $opacity
}

decoration:blur {
    enabled = $blur
    size = 8
    passes = 2
    ignore_opacity = true
    new_optimizations = true
    xray = false
	popups = true
}

layerrule = match:namespace rofi|waybar|swaync-control-center|swaync-notification-window, blur on, ignore_alpha 0.1
layerrule = match:namespace waybar, blur_popups on
layerrule = match:namespace hyprpicker, no_anim on

# ===== Анимации ===== #

animations {
    enabled = yes
    bezier = w1,  0.24, 0.82, 0.24, 1.00
    bezier = w2,  0.18, 0.95, 0.23, 1.00
    bezier = ws1, 0.22, 0.90, 0.55, 1.00
    animation = windows,     1, 3, w1, popin 75%
    animation = windowsMove, 1, 2, w2
    animation = fade,        1, 2, default
    animation = workspaces,  1, 3, ws1
    animation = layers,      1, 2, w1, popin 90%
}

# ===== misc ===== #

misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
}

# ===== Бинды ===== #

bind = super, 1, workspace, 1
bind = super, 2, workspace, 2
bind = super, 3, workspace, 3
bind = super, 4, workspace, 4
bind = super, 5, workspace, 5
bind = alt, 1, movetoworkspace, 1
bind = alt, 2, movetoworkspace, 2
bind = alt, 3, movetoworkspace, 3
bind = alt, 4, movetoworkspace, 4
bind = alt, 5, movetoworkspace, 5
bind = super, mouse_down, workspace, -1
bind = super, mouse_up, workspace, +1
bindm = super, mouse:272, movewindow
bindm = super, mouse:273, resizewindow

bind = super, a, layoutmsg, swapwithmaster
bind = super, s, fullscreen, 1
bind = super, d, togglefloating
bind = super, f, fullscreen, 0
bind = super, c, killactive

bind = super, return, exec, sh -c "hyprctl switchxkblayout all 0 && alacritty"
bind = super, e, exec, thunar
bind = super, w, exec, ~/.config/hypr/screen.sh
bind = super+shift, w, exec, ~/.config/hypr/screen.sh full
bind = super, p, exec, hyprpicker -a
bind = super, m, exec, pkill -x waybar || waybar -c $waybar/waybar.jsonc -s $waybar/waybar.css
bind = super, n, exec, pkill -x swaync
bind = super, u, exec, ~/.config/hypr/colors/magic.sh
bind = super, l, exec, hyprlock

bind = super, tab, exec, rofi -show drun -theme $rofi/config.rasi
bind = super, q, exec, $rofi/sites.sh
bind = super, z, exec, $rofi/files.sh
bind = super, x, exec, $rofi/cliphist.sh
bind = super, escape, exec, $rofi/audio.sh
bind = alt, escape, exec, $rofi/vpn.sh
bind = ctrl+alt, delete, exec, $rofi/power.sh

# ===== Правила окон ===== #

windowrule = match:class ^(thunar|engrampa)$, float on, center on
windowrule = match:title ^(.*)(- Thunar)$, float off
windowrule = match:initial_title ^(Менеджер архивов)$, float off

windowrule = match:class ^(geany|org.gnome.Meld)$, center on
windowrule = match:class ^(firefox|geany)$, focus_on_activate on
windowrule = match:class ^(org.pulseaudio.pavucontrol)$, float on, pin on, size 600 400, move 900 640

$float = float on, size 1280 720
windowrule = match:class ^(mpv|imv)$, $float, opaque on
windowrule = match:class ^(waypaper|io.missioncenter.MissionCenter|org.telegram.desktop)$, $float

windowrule = match:class ^(firefox)$, workspace 1
